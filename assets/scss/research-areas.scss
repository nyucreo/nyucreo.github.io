.research-areas {
  .area-row {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 1.5rem;
    margin-bottom: 3rem;
    align-items: stretch;
    
    &:last-child {
      margin-bottom: 0;
    }

    > * {
      min-width: 0;      // 允许收缩
      max-width: 100%;   // 不超过列宽
      width: 100%;       // 填满列
    }
  }
  
  .area-card {
    background: none;
    box-shadow: none;          
    border-radius: 0;         
    padding: 2.5rem 2rem;
    text-align: center;
    text-decoration: none;
    color: inherit;  
    position: relative;
    overflow: hidden;
    min-height: 320px;

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    width: 100%;
    height: 100%;
    box-sizing: border-box;

    transition: transform 0.3s ease, box-shadow 0.3s ease;
    
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba(255,255,255,0.1), transparent);
      pointer-events: none;
    }
    
    .area-icon {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
    //   background: rgba(255,255,255,0.2);
    //   backdrop-filter: blur(10px);
      background: #f2f2f2;  
      position: relative;
      z-index: 1;
      
      i {
        font-size: 2rem;
        color: white;
      }
    }
    
    h3 {
      color: #520c8c;
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 1rem;
      line-height: 1.3;
      position: relative;
      z-index: 1;
    }
    
    p { display: none; }
    
    &:hover {
      transform: translateY(-8px);
      box-shadow: 0 15px 40px rgba(82, 12, 140, 0.4);
    }
  }
  
  .project-card {
    position: relative;
    border-radius: 16px;
    overflow: hidden;
    min-height: 320px;
    display: block;
    background: #f5f5f5;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
    cursor: pointer;

    width: 100%;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;

    transition: all 0.3s ease;
    
    .project-image {
      position: relative;
      width: 100%;
      aspect-ratio: 16 / 9;
      height: auto; 
    //   height: 100%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      overflow: hidden;
      
      /* background image */
      background-image: url('featured.png');
      
      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
        transition: transform 0.3s ease;
      }
      
      /* 顶部微妙的渐变遮罩 */
      &::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, 
          rgba(0, 0, 0, 0) 0%, 
          rgba(0, 0, 0, 0.05) 50%,
          rgba(0, 0, 0, 0.1) 100%);
        z-index: 1;
      }
    }
    
    .project-content {
      position: relative;
      z-index: 2;
      padding: 1.5rem 2rem 2rem;
      background: transparent;
      min-height: 80px; /* 底部区域固定高度 */
      display: flex;
      flex-direction: column;
      justify-content: center;
      
      h4 {
        font-size: 1.3rem;
        font-weight: 700;
        margin: 0 0 0.5rem 0;
        line-height: 1.3;
        color: #520c8c;
        
        a {
          color: inherit;
          text-decoration: none;
          transition: color 0.3s ease;
          
          &:hover {
            color: #7b1fa2;
          }
        }
      }
      
      .project-summary {
        font-size: 0.95rem;
        color: #666;
        line-height: 1.5;
        margin: 0;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
    }
    
    &:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(82, 12, 140, 0.15);
      
      .project-image {
        img {
          transform: scale(1.05);
        }
        
        &::after {
          background: linear-gradient(to bottom, 
            rgba(0, 0, 0, 0) 0%, 
            rgba(0, 0, 0, 0.08) 50%,
            rgba(0, 0, 0, 0.15) 100%);
        }
      }
      
      .project-content {
        h4 a {
          color: #7b1fa2;
        }
      }
    }
  }
}

@supports not (aspect-ratio: 1 / 1) {
  .research-areas .project-card .project-image {
    height: 240px; // 旧浏览器回退
    aspect-ratio: unset;
  }
}

// Dark mode support
.dark .research-areas {
  .project-card {
    background: rgba(30, 30, 30, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
    
    .project-content {
      background: rgba(30, 30, 30, 0.95);
      
      h4 {
        color: #bb86fc;
        
        a {
          color: inherit;
          
          &:hover {
            color: #d1c4e9;
          }
        }
      }
      
      .project-summary {
        color: rgba(255, 255, 255, 0.8);
      }
    }
    
    &:hover {
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6);
      
      .project-content {
        h4 a {
          color: #d1c4e9;
        }
      }
    }
  }
}

// Responsive design
@media (max-width: 992px) {
  .research-areas .area-row {
    grid-template-columns: 1fr;
    gap: 1.5rem;
    
    .area-card,
    .project-card {
      max-width: 600px;
      margin: 0 auto;
      width: 100%;
    }
  }
}

@media (max-width: 768px) {
  .research-areas {
    .area-card {
      padding: 2rem 1.5rem;
      min-height: 280px;
      
      h3 {
        font-size: 1.15rem;
      }
      
      p {
        font-size: 0.9rem;
      }
    }
    
    .project-card {
      min-height: 280px;
      
      .project-image {
        height: 180px;
      }
      
      .project-content {
        padding: 1.25rem 1.5rem 1.75rem;
        
        h4 {
          font-size: 1.2rem;
        }
        
        .project-summary {
          font-size: 0.9rem;
        }
      }
    }
  }
}

// /* 1) 让 3 列在任何情况下都等宽且可收缩 */
// .research-areas .area-row {
//   /* 原: grid-template-columns: repeat(3, 1fr);  */
//   grid-template-columns: repeat(3, minmax(0, 1fr));
// }

// /* 2) 阻止子项以内容宽度撑开或压缩网格列： */
// .research-areas .area-row > * {
//   min-width: 0;      /* 允许收缩 */
//   max-width: 100%;   /* 不超过列宽 */
//   width: 100%;       /* 填满列 */
// }

// /* 3) 保证 project/area 卡片自身也按列宽铺满 */
// .research-areas .area-card,
// .research-areas .project-card {
//   width: 100%;
//   box-sizing: border-box;
//   display: flex;
//   flex-direction: column;
// }

// /* 4) 让图片区域有稳定比例，避免高度把列“挤瘦” */
// .research-areas .project-card .project-image {
//   aspect-ratio: 16 / 9;   /* 固定比例，避免内容把网格搞变形 */
//   height: auto;           /* 用比例控制高度 */
// }

// /* 5) 在较窄的容器里也保持良好换行（可选但推荐） */
// @supports not (aspect-ratio: 1 / 1) {
//   .research-areas .project-card .project-image {
//     height: 240px; /* 旧浏览器回退 */
//   }
// }
