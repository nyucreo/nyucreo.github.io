{{ $count := .Get "count" | default 4 }}
{{ $events := where .Site.RegularPages "Section" "event" }}
{{ $upcoming := where $events ".Date" "ge" (now) }}
{{ $list := cond (gt (len $upcoming) 0) (sort $upcoming "Date") (sort $events "Date" "desc") }}
{{ range first $count $list }}
  <div style="background: white; border: 1px solid #e9ecef; border-left: 4px solid #520c8c; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; display: flex; align-items: flex-start; gap: 1rem; box-shadow: 0 2px 4px rgba(82, 12, 140, 0.1); transition: transform 0.2s ease;">
    <div style="min-width: 50px; text-align: center;">
      <div style="background: #520c8c; color: white; padding: 0.2rem 0.4rem; font-size: 0.7rem; font-weight: 700; border-radius: 3px 3px 0 0;">
        {{ .Date.Format "Jan" }}
      </div>
      <div style="background: white; color: #520c8c; font-size: 1.2rem; font-weight: 700; padding: 0.4rem; border: 2px solid #520c8c; border-top: none; border-radius: 0 0 3px 3px;">
        {{ .Date.Format "2" }}
      </div>
    </div>
    <div style="flex: 1;">
      <div style="color: #6c757d; font-size: 0.875rem; margin-bottom: 0.3rem;">
        {{ if .Params.all_day }}All day{{ else }}{{ .Date.Format "3:04 PM" }}{{ end }}
      </div>
      <div style="font-weight: 600; margin-bottom: 0.5rem; line-height: 1.3;">
        <a href="{{ .RelPermalink }}" style="color: #2c3e50; text-decoration: none; transition: color 0.3s ease;" onmouseover="this.style.color='#520c8c'" onmouseout="this.style.color='#2c3e50'">{{ .Title | truncate 80 }}</a>
      </div>
      {{ with .Params.location }}
        <div style="color: #95a5a6; font-size: 0.875rem;">📍 {{ . }}</div>
      {{ end }}
    </div>
  </div>
{{ end }}
<div class="text-center mt-3">
  <a href="/event/" style="color: #520c8c; font-weight: 600; text-decoration: none; padding: 0.5rem 1rem; border: 2px solid #520c8c; border-radius: 6px; transition: all 0.3s ease; background: transparent;" onmouseover="this.style.background='#520c8c'; this.style.color='white'" onmouseout="this.style.background='transparent'; this.style.color='#520c8c'">View More →</a>
</div>